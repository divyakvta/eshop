<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create an Account</title>

    <!-- Include Toastify CSS (for styling) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <!-- Bootstrap CSS link -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Custom class for light pink background */
        .custom-light-pink-bg {
            background-color: #f8d7da; /* Replace with your preferred light pink color code */
        }

        /* Center the form within the card */
        .center-form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Adjust spacing between form elements */
        .form-input {
            margin-bottom: 20px;
        }

        /* Add padding to the form */
        .form-padding {
            padding: 30px;
        }

        /* Add some margin to the form button */
        .form-btn {
            margin-top: 30px;
        }

        /* Style the error messages */
        .error-message {
            color: #dc3545;
            font-size: 14px;
        }

        /* Style the login link */
        .login-link {
            margin-top: 20px;
            display: block;
            text-align: center;
            color: #007bff; /* Bootstrap primary color */
        }

        /* Style the form headings */
        .form-heading {
            color: #007bff;
            font-size: 24px;
            margin-bottom: 30px;
        }

        /* Style the form labels */
        .form-label {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }

        /* Style the form input fields */
        .form-control {
            border-radius: 10px;
            padding: 12px;
            font-size: 16px;
        }

        /* Style the form button */
        .btn-success {
            background-color: #28a745; /* Bootstrap success color */
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 18px;
        }
    </style>
</head>

<body>

    <section class="vh-100 bg-image custom-light-pink-bg">
        <div class="mask d-flex align-items-center h-100 gradient-custom-3">
            <div class="container h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                        <div class="card" style="border-radius: 15px;">
                            <div class="card-body p-5 form-padding center-form">
                                <h2 class="text-uppercase text-center mb-5 form-heading">Create an account</h2>

                                <form action="/users/register" method="post" class="center-form">

                                    <!-- Username -->
                                    <div class="form-input">
                                        <label for="name" class="form-label">Name:</label>
                                        <input type="text" id="username" name="username" onkeyup="validateName()"
                                            class="form-control" required>
                                        <span id="username-error" class="error-message"></span>
                                    </div>

                                    <!-- Email -->
                                    <div class="form-input">
                                        <label for="email" class="form-label">Email:</label>
                                        <input type="email" id="email" name="email" onkeyup="validateEmail()"
                                            class="form-control" required>
                                        <span id="email-error" class="error-message"></span>
                                    </div>

                                    <div class="form-input">
                                          <label for="phone" class="form-label">Phone </label>
                                          <input type="text"  id="phone" name="phone" onkeyup="validatePhone()" 
                                          class="form-control"   required>
                                          <span id="phone-error" class="error-message"></span>
                                      </div>

                                    <!-- Password -->
                                    <div class="form-input">
                                        <label for="password" class="form-label">Password:</label>
                                        <input type="password" id="password" name="password" onkeyup="validatePassword()"
                                            class="form-control" required>
                                        <span id="password-error" class="error-message"></span>
                                    </div>

                                    <!-- Confirm Password -->
                                    <div class="form-input">
                                        <label for="confirmPassword" class="form-label">Confirm Password:</label>
                                        <input type="password" id="confirmPassword" name="confirmPassword"
                                            onkeyup="validatePassword()" class="form-control" required>
                                        <span id="confirmPassword-error" class="error-message"></span>
                                    </div>

                             
                                    <input type="hidden" value="<%= refUser %>" name="refUser">

                                    <div class="form-btn">
                                        <input type="submit" value="Signup" class="btn btn-success btn-lg">
                                    </div>

                                    <!-- Login Link -->
                                    <a href="/users/login" class="login-link">Already have an account? Login here.</a>
                                </form>
                                <% if (typeof message !== 'undefined' && message.trim() !== '') { %>
                                    <p id="successMessage" style="color: #28a745;"><%= message %></p>
                                
                                    <script>
                                        // Add a script to hide the message after 30 seconds
                                        setTimeout(function() {
                                            var successMessage = document.getElementById('successMessage');
                                            if (successMessage) {
                                                successMessage.style.display = 'none';
                                            }
                                        }, 3000); // 30 seconds in milliseconds
                                    </script>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JS


    <!-- Bootstrap JS and Popper.js scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</body>

<script>
    let nameError = document.getElementById("username-error");
    let emailError = document.getElementById("email-error");
    let phoneError = document.getElementById('phone-error');
    var passwordError = document.getElementById("password-error");
    var confirmPasswordError = document.getElementById("confirmPassword-error");
  
    function validateName() {
    let name = document.getElementById('username').value;

    if (name.length === 0) {
        nameError.innerHTML = "Name is required";
        return false;
    } else if (!name.match(/^[A-Za-z\s'-]+$/)) {
        nameError.innerHTML = "Write a valid name";
        return false;
    } else {
        nameError.innerHTML = "";
        return true;
    }
}

  
    function validateEmail() {
        var email = document.getElementById('email').value;
    
        if (email.length === 0) {
          emailError.innerHTML = "Email is required";
          return false;
        }
    
        if (
          !email.match(
            /^(?:\+\d{1,3}\-)?[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/
          )
        ) {
          emailError.innerHTML = "Email Invalid";
          return false;
        }else{
          emailError.innerHTML = "";
          return true;
        }
    
      }


      function validatePhone() {
    const phone = document.getElementById("phone").value; 

    if (phone.length !== 10) {
        phoneError.innerHTML = "Invalid phone number"; 
        return false;
    }

    if (!phone.match(/^\d{10}$/)) {
        phoneErr.innerHTML = "Invalid Entry"; 
        return false;
    }else {
        phoneError.innerHTML = "";
      }
}
  
      function validatePassword() {
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirmPassword").value;
    
        if (password.length < 5) {
        passwordError.innerHTML = "Password should have a minimum of 5 characters";
        return false;
      } else {
        passwordError.innerHTML = "";
      }
  
      // Validate password match
      if (password !== confirmPassword) {
        confirmPasswordError.innerHTML = "Passwords do not match";
        return false;
      } else {
        confirmPasswordError.innerHTML = "";
      }
  
      return true;
    }
  </script>



</html>
